{% extends "base.html" %}
{% load quote_filters %}

{% block opengraph %}
    <meta property="og:url" content="https://podverse.tv/clips/{{ quote.id }}/">
    <meta property="og:title" content="{{ quote.summary }}">
    <meta property="og:type" content="website" />
    <meta property="og:description" content="
        {% if quote.episode.description %}
            {{ quote.episode.description }}
        {% elif quote.episode.podcast.description %}
            {{ quote.episode.podcast.description }}
        {% else %}
            Find and share highlights of your favorite podcasts. Connect with podcast listeners. Raise money for your podcast. Inspired by reddit.
        {% endif %}
        ">
    {% if quote.episode.youtube_url %}
        <meta property="og:image" content="https://img.youtube.com/vi/{{ quote.episode.video_id }}/0.jpg">
    {% endif %}
    {% if quote.episode.podcast.image %}
        <meta property="og:image" content="https://podverse.tv/media/{{ quote.episode.podcast.image }}">
    {% endif %}
    {% if quote.episode.image %}
        <meta property="og:image" content="https://podverse.tv/media/{{ quote.episode.image }}">
    {% endif %}
    <meta property="og:image" content="https://podverse.tv/static/img/podverse-logo-square.jpg" />
{% endblock %}

{% block content %}
    
    {% include 'main_col_width.html' %}
    
    {% include 'autocomplete_slim.html' %}
    
    {% if not quote.is_full_episode|is_true %}
        {% if quote_previous or quote_next %}
            <table style="width:100%;margin:-17px 0 0 0;">
                <tr style="width:100%;">
                    {% if quote_previous or quote_next %}
                        <td class="pq-previous-clip gray-link">
                            {% if quote_previous %}
                                <a href="{{ quote_previous.get_absolute_url }}" id="previous-clip">
                                    < prev
                                </a>
                            {% endif %}
                        </td>
                    {% endif %}
                    {% if quote_next or quote_previous %}
                        <td class="pq-autoplay">
                            <div class="pq-autoplay-button autoplay-on" id="autoplay-on">autoplay on</div>
                            <div class="pq-autoplay-button autoplay-off" id="autoplay-off">autoplay off</div>
                        </td>                    
                    {% endif %}
                    {% if quote_next or quote_previous %}
                        <td class="pq-next-clip gray-link">
                            {% if quote_next %}
                                <a href="{{ quote_next.get_absolute_url }}" id="next-clip">
                                    next >
                                </a>
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
            </table>
        {% endif %}
    {% endif %}
{% endblock %}<!-- /block content -->
    
{% block quotes %}
    <!-- quote_list is tech debt that needs to be banished after a non-kluge youtube.js file is created -->
    {% for quote in quote_pseudo_list %}
        {% include 'quotes.html' %}
    {% endfor %}
    
{% if is_quote_page %}    
    {% include 'quote_header.html' %}
{% endif %}

{% endblock %}<!-- / block quotes -->

{% block more %}
    <div class="pq-quote-more dark-link">
        <div class="pq-quote-more-headline">
            <a href="{% url 'podcast_quote_list_root' quote.episode.podcast.id %}">More from this podcast</a>
        </div>
        {% for quote in more_podcast_quotes %}
            <hr>
            <a href="{{ quote.get_absolute_url }}">
                <div class="pq-quote-more-image display-none-549px">
                    {% if quote.episode.youtube_url %}
                        <img src="https://img.youtube.com/vi/{{ quote.episode.video_id }}/0.jpg">
                    {% elif quote.episode.image %}
                        <img src="{{MEDIA_URL}}{{ quote.episode.image }}">
                    {% elif quote.episode.podcast.image %}
                        <img src="{{MEDIA_URL}}{{ quote.episode.podcast.image }}">
                    {% endif %}
                </div>
            </a>
            <div class="pq-quote-more-box">
                <div class="pq-quote-more-text">
                    <a class="font-semibold" href="{{ quote.get_absolute_url }}">
                        <span class="hidden-xs hidden-sm hidden-md">
                            {{ quote.summary }}
                        </span>
                        <span class="hidden-xs hidden-sm hidden-lg">
                            {{ quote.summary}}
                        </span>
                        <span class="display-none-549px hidden-md hidden-lg">
                            {{ quote.summary|truncatechars:125 }}
                        </span>
                        <span class="display-none-550px">
                            {{ quote.summary|truncatechars:100 }}
                        </span>
                    </a>
                    <br>
                    <a class="font-semibold" style="font-size:13px;" href="{{ quote.episode.get_absolute_url }}">
                        Episode: {{ quote.episode.title|truncatechars:60 }}
                    </a>
                    <br>
                    <a style="font-size:13px;" href="{{ quote.get_absolute_url }}">
                        {% if quote.time_quote_ends %}
                            Length: {{ quote.duration }} 
                            / {{ quote.converted_time_begins }} 
                            - {{ quote.converted_time_ends }}
                        {% else %}
                            Starts: {{ quote.converted_time_begins }}
                        {% endif %}
                    </a>
                </div>
            </div>
            <div class="clearfix">
            </div>
        {% endfor %}
    </div>
    <div class="pq-quote-more dark-link">
        <div class="pq-quote-more-headline">
            <a href="{% url 'episode_quote_list_root' quote.episode.id %}">More from this episode</a>
        </div>
        {% for quote in more_episode_quotes %}
            <hr>
            <a href="{{ quote.get_absolute_url }}">
                <div class="pq-quote-more-image display-none-549px">
                    {% if quote.episode.youtube_url %}
                        <img src="https://img.youtube.com/vi/{{ quote.episode.video_id }}/0.jpg">
                    {% elif quote.episode.image %}
                        <img src="{{MEDIA_URL}}{{ quote.episode.image }}">
                    {% elif quote.episode.podcast.image %}
                        <img src="{{MEDIA_URL}}{{ quote.episode.podcast.image }}">
                    {% endif %}
                </div>
            </a>
            <div class="pq-quote-more-box">
                <div class="pq-quote-more-text">
                    <a class="font-semibold" href="{{ quote.get_absolute_url }}">
                        <span class="hidden-xs hidden-sm hidden-md">
                            {{ quote.summary }}
                        </span>
                        <span class="hidden-xs hidden-sm hidden-lg">
                            {{ quote.summary}}
                        </span>
                        <span class="display-none-549px hidden-md hidden-lg">
                            {{ quote.summary|truncatechars:125 }}
                        </span>
                        <span class="display-none-550px">
                            {{ quote.summary|truncatechars:100 }}
                        </span>
                    </a>
                    <br>
                    <a style="font-size:13px;" href="{{ quote.get_absolute_url }}">
                        {% if quote.time_quote_ends %}
                            Length: {{ quote.duration }} 
                            / {{ quote.converted_time_begins }} 
                            - {{ quote.converted_time_ends }}
                        {% else %}
                            Starts: {{ quote.converted_time_begins }}
                        {% endif %}
                    </a>
                </div>
            </div>
            <div class="clearfix">
            </div>
        {% endfor %}
    </div>
{% endblock %}